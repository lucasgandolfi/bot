<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>READING COOKIES</title>
</head>
<body>

</body>
<script type="text/javascript">
	function getCookie(name) {
    // Split cookie string and get all individual name=value pairs in an array
    var cookieArr = document.cookie.split(";");

    // Loop through the array elements
    for(var i = 0; i < cookieArr.length; i++) {
        var cookiePair = cookieArr[i].split("=");

        /* Removing whitespace at the beginning of the cookie name
        and compare it with the given string */
        if(name == cookiePair[0].trim()) {
            // Decode the cookie value and return
            return decodeURIComponent(cookiePair[1]);
        }
    }

    // Return null if not found
    return null;
}

	var URLToken;
	document.cookie = "PORTAL_INTEGRACAO=62b78025-1d89-41a6-8943-7f9502816220";
	let cookies = document.cookie;
    let cookieArray = cookies.split(';');
    console.log(cookieArray);
	/*for(var i=0; i<cookieArray.length; i++) {
		name = cookieArray[i].split('=')[0];
		value = cookieArray[i].split('=')[1];
		if(name == 'token2')
		{
			URLToken = value;
		}
	}*/
	URLToken = getCookie('PORTAL_INTEGRACAO');
	console.log("URLToken: " + URLToken);
    let cronchatToken = '182';
    let hostURL = 'https://cronchatcronapp.cronapp.io/get-chat?token=';
    let chatbotURL = `${hostURL}${cronchatToken}&extraparam=${URLToken}`;
    let scriptHTML = document.createElement("script");
    scriptHTML.src = chatbotURL;
    scriptHTML.type = 'text/javascript'
    console.log("scriptHtml: " + scriptHTML);
    console.log("chatbotURL: " + chatbotURL);
    document.body.appendChild(scriptHTML);
</script>

</html>
